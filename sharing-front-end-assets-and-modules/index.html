<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>Sharing Front-end Assets and Modules</title>

    <meta name="description" content="A framework for easily creating beautiful presentations using HTML">
    <meta name="author" content="Hakim El Hattab">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="css/reveal.min.css">
    <link rel="stylesheet" href="css/theme/moon.css" id="theme">

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- If the query includes 'print-pdf', include the PDF print sheet -->
    <script>
      if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = 'css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
      }
    </script>

    <style>
      .text-red {
        color: rgb(185, 74, 72);
      }
      .text-yellow {
        color: rgb(192, 152, 83);
      }
    </style>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="reveal">
      <div class="slides">
        <section>
          <h3>Sharing front-end assets and modules</h3>
        </section>

        <section>
          <p>Current in-house web projects</p>
          <ul>
            <li>Shareplan Web</li>
            <li>Crashplan Console</li>
            <li>Crashplan Console In-app Purchase</li>
            <li>code42.com</li>
            <li>code42.com/crashplan</li>
            <li>code42.com/enterprise-store</li>
            <li>Sales42</li>
            <li>Several others and more to come</li>
        </section>

        <section>
          <p>Sharing is built in the open source ecosystem</p>
          <p class="fragment">We have our own ecosystem here</p>
          <p class="fragment">Sharing needs to be built into our ecosystem</p>
        </section>

        <section>
          <p><img src="images/web-guild-repos.png"/></p>
          <p>39 repos extracted to be shared</p>
          <p class="fragment">Things are improving</p>
        </section>

        <section>
          <h3>Room for improvement</h3>
          <ul>
            <li class="fragment">Built in assumptions about load order</li>
            <li class="fragment">Built in assumptions about framework</li>
            <li class="fragment">Poor documentation</li>
            <li class="fragment">Documentation is hard w/out something like gh-pages</li>
            <li class="fragment">Poor test coverage</li>
            <li class="fragment">No test automation (need CI server)</li>
            <li class="fragment">No code linting as part of test automation</li>
            <li class="fragment">Load order assumptions</li>
            <li class="fragment">Unknown dependencies</li>
            <li class="fragment">Peer dependency assumptions</li>
            <li class="fragment">Inconsistent directory structure</li>
            <li class="fragment">Inconsistent style</li>
            <li class="fragment">"Nobody" owns the code</li>
            <li class="fragment">This "Nobody" jerk is a terrible maintainer</li>
          </ul>
        </section>

        <section>
          <p>Sources for sharing front-end assets</p>
          <ul>
            <li>npm</li>
            <li>bower</li>
            <li>github/bitbucket/stash repo</li>
            <li>rubygems</li>
            <li>rails-assets</li>
            <li>CDN script tag (haha)</li>
          </ul>
        </section>

        <section>
          <p>Methods for sharing front-end assets<p>
          <p><ul>
            <li><a href="http://wiki.commonjs.org/wiki/Modules/1.1">CommonJS Modules</a></li>
            <li><a href="https://github.com/amdjs/amdjs-api/wiki/AMD">AMD Modules</a></li>
            <li>Globals (with or without namespacing)</li>
            <li><a href="https://github.com/umdjs/umd">Universal Module Definition (UMD)</a></li>
          </ul></p>
        </section>

        <section>
          <h3>Modules value propositions</h3>
          <ul>
            <li>Well known dependencies</li>
            <li>Well known exports</li>
            <li>Fewer/Zero Globals</li>
            <li>Avoids namespacing</li>
            <li>Shareable pieces of code</li>
            <li>Testable pieces of code</li>
            <li>Necessary for organization of a large codebase</li>
          </ul>
        </section>

        <section>
          <p>There's a lot of controversy on the topic, (10m searching)</p>
          <ul>
            <li><a href="http://tagneto.blogspot.com/2012/01/simplicity-and-javascript-modules.html">Simplicity and JavaScript modules</a></li>
            <li><a href="http://tomdale.net/2012/01/amd-is-not-the-answer/">AMD is Not the Answer</a></li>
            <li><a href="http://blog.millermedeiros.com/amd-is-better-for-the-web-than-commonjs-modules/">AMD is better for the web than CommonJS modules</a></li>
            <li><a href="http://unscriptable.com/code/AMD-vs-CommonJS">AMD vs CommonJS</a></li>
            <li><a href="https://github.com/jashkenas/underscore/pull/431#issuecomment-3452856">Underscore removed AMD support</a></li>
          </ul>
        </section>

        <section>
          <p>There are several implementations</p>
          <ul>
            <li><a href="https://github.com/jrburke/requirejs">(AMD) RequireJS</a></li>
            <li><a href="https://github.com/jrburke/almond">(AMD) Almond</a></li>
            <li><a href="https://github.com/cujojs/curl">(AMD) curl.js</a></li>
            <li><a href="https://github.com/stefanpenner/loader.js">(AMD) loader.js</a></li>
            <li><a href="http://dojotoolkit.org/documentation/tutorials/1.9/modules/">(AMD) Dojo modules</a></li>
            <li><a href="http://nodejs.org/api/modules.html">(CJS) Node modules</a></li>
            <li><a href="http://browserify.org/">(CJS) Browserify</a></li>
            <li><a href="http://webpack.github.io/">(CJS) Webpack</a></li>
            <li><a href="https://github.com/wycats/minispade">(CJS) Minispade</a></li>
            <li><a href="https://github.com/requirejs/cajon">(AMD/CJS) Cajon</a></
          </ul>
        </section>

        <section>
          <p>Sync Modules - CommonJS (browserify, webpack, node)</p>
<pre class="fragment"><code data-trim>
// example.js
exports.hello = function() {
  return 'Hello World'
};
</code></pre>
<pre class="fragment"><code data-trim>
// consumer.js
var example = require('./example.js');
example.hello();
</code></pre>
          <ul class="fragment">
            <li>↑: very easy to reason about load order</li>
            <li>↑: easy to understand dependencies</li>
            <li class="text-yellow">↓: requires dependencies to already be loaded</li>
            <li class="text-yellow">↓: requires a specific load order</li>
          </ul>
        </section>

        <section>
          <p>Async Modules - AMD (RequireJS, Almond, curl.js)</p>
<pre class="fragment"><code data-trim>
// example.js
define(function(){
  return {
    hello: function() {
      return 'Hello World';
    }
  };
});
</code></pre>
<pre class="fragment"><code data-trim>
// consumer.js
require(['example'], function(example){
  example.hello();
});
</code></pre>
          <ul class="fragment">
            <li>↑: easy to understand dependencies</li>
            <li>↑: fine-grained control over code loading</li>
            <li>↑: has potential to be faster in certain cases</li>
            <li class="text-red">↓: definitely harder to reason about</li>
          </ul>
        </section>

        <section>
          <p>Globals w/namespacing</p>
<pre class="fragment"><code data-trim>
// example.js
window.example = {
  hello: function() {
    return 'Hello World';
  }
};
</code></pre>
<pre class="fragment"><code data-trim>
// consumer.js
window.example.hello();
</code></pre>
          <ul class="fragment">
            <li>↑: very easy to reason about</li>
            <li class="text-red">↓: hidden dependencies</li>
            <li class="text-red">↓: can be clobbered by other third-party libs</li>
            <li class="text-red">↓: requires dependencies to already be loaded</li>
            <li class="text-red">↓: every module creates a global unless namespaced</li>
          </ul>
        </section>

        <section>
          <p>ES6 Modules</p>
<pre><code data-trim>
// jquery.js
// ...
export var $;
</code></pre>
<pre class="fragment"><code data-trim>
System.paths['jquery'] = '//code.jquery.com/jquery-1.10.2.min.js';
System.import('jquery').then(function($) {
  // ...
});
</code></pre>
          <p class="fragment">Similar upsides and downsides as AMD</p>
          <p class="fragment">Less ceremony around defining the module</p>
          <p class="fragment">ES6 Final Draft slated for 2015</p>
        </section>

        <section>
          <h1>Takeaways</h1>
          <ul>
            <li>Using any modules is better than using globals</li>
            <li>Doesn't really affect Angular-only libraries/apps</li>
            <li>Does affect framework agnostic libraries</li>
            <li>Sharing code can be harder than it sounds</li>
            <li>We have to make it as easy as possible to share</li>
          </ul>
        </section>

        <section>
          <h3>Recommended Reading</h3>
          <p><a href="http://producingoss.com/en/index.html"><img src="images/producing-open-source-software.png"></a></p>
        </section>

      </div>

    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.min.js"></script>

    <script>

      // Full list of configuration options available here:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
        transition: Reveal.getQueryHash().transition || 'linear', // default/cube/page/concave/zoom/linear/fade/none

        // Optional libraries used to extend on reveal.js
        dependencies: [
          { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
          { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
          { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
        ]
      });

    </script>

  </body>
</html>
